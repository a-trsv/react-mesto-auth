{"ast":null,"code":"class Api {\n  constructor(options) {\n    this._address = options.address;\n    this._groupId = options.groupId;\n    this._token = options.token;\n  }\n\n  getUserInfo() {\n    return fetch(`${this._address}/${this._groupId}/users/me`, {\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  patchUserInfo({\n    name: inputName,\n    about: inputJob\n  }) {\n    return fetch(`${this._address}/${this._groupId}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: inputName,\n        about: inputJob\n      })\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  getCards() {\n    return fetch(`${this._address}/${this._groupId}/cards`, {\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  postCard(apiData) {\n    return fetch(`${this._address}/${this._groupId}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: apiData.name,\n        link: apiData.link\n      })\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._address}/${this._groupId}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (!isLiked) {\n      return this.deleteLike(cardId);\n    } else {\n      return this.setLike(cardId);\n    }\n  }\n\n  setLike(cardId) {\n    return fetch(`${this._address}/${this._groupId}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  deleteLike(cardId) {\n    return fetch(`${this._address}/${this._groupId}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  patchUserAvatar(userData) {\n    return fetch(`${this._address}/${this._groupId}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: userData.avatar\n      })\n    }).then(res => this._checkServerResponse(res));\n  }\n\n  _checkServerResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } // Если происходит ошибка, отклоняем промис\n\n\n    return Promise.reject(`${res.status}`);\n  }\n\n}\n\nconst api = new Api({\n  address: 'https://mesto.nomoreparties.co/v1',\n  groupId: 'cohort-24',\n  token: '4d34d552-bc81-44cb-b18a-2296a1ced45f'\n});\nexport default api;","map":{"version":3,"sources":["/Users/AleksiTarasov/Desktop/develop/react-mesto-auth/src/utils/api.js"],"names":["Api","constructor","options","_address","address","_groupId","groupId","_token","token","getUserInfo","fetch","headers","authorization","then","res","_checkServerResponse","patchUserInfo","name","inputName","about","inputJob","method","body","JSON","stringify","getCards","postCard","apiData","link","deleteCard","cardId","changeLikeCardStatus","isLiked","deleteLike","setLike","patchUserAvatar","userData","avatar","ok","json","Promise","reject","status","api"],"mappings":"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","sourcesContent":["class Api {\n    constructor(options) {\n        this._address = options.address\n        this._groupId = options.groupId\n        this._token = options.token\n    }\n    getUserInfo() {\n        return fetch(`${this._address}/${this._groupId}/users/me`, {\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    patchUserInfo({ name: inputName, about: inputJob }) {\n        return fetch(`${this._address}/${this._groupId}/users/me`, {\n            method: 'PATCH',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: inputName,\n                about: inputJob,\n            })\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    getCards() {\n        return fetch(`${this._address}/${this._groupId}/cards`, {\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    postCard(apiData) {\n        return fetch(`${this._address}/${this._groupId}/cards`, {\n            method: 'POST',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: apiData.name,\n                link: apiData.link\n            })\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    deleteCard(cardId) {\n        return fetch(`${this._address}/${this._groupId}/cards/${cardId}`, {\n            method: 'DELETE',\n            headers: {\n                authorization: this._token,\n            }\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    changeLikeCardStatus(cardId, isLiked) {\n        if (!isLiked) {\n            return this.deleteLike(cardId);\n        } else {\n            return this.setLike(cardId);\n        }\n    }\n\n    setLike(cardId) {\n        return fetch(`${this._address}/${this._groupId}/cards/likes/${cardId}`, {\n            method: 'PUT',\n            headers: {\n                authorization: this._token,\n            }\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    deleteLike(cardId) {\n        return fetch(`${this._address}/${this._groupId}/cards/likes/${cardId}`, {\n            method: 'DELETE',\n            headers: {\n                authorization: this._token,\n            }\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n    patchUserAvatar(userData) {\n        return fetch(`${this._address}/${this._groupId}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                avatar: userData.avatar\n            })\n        })\n            .then(res => this._checkServerResponse(res))\n    }\n\n    _checkServerResponse(res) {\n        if (res.ok) {\n            return res.json()\n        }\n        // Если происходит ошибка, отклоняем промис\n        return Promise.reject(`${res.status}`)\n    }\n}\n\nconst api = new Api({\n    address: 'https://mesto.nomoreparties.co/v1',\n    groupId: 'cohort-24',\n    token: '4d34d552-bc81-44cb-b18a-2296a1ced45f'\n})\n\nexport default api"]},"metadata":{},"sourceType":"module"}